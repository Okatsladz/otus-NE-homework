## Лабораторная работа #7. Развертывание коммутируемой сети с резервными каналами/
------

Топология сети:  
![Топология сети](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab7/Images/Topology.png)  
Используемое ПО: Cisco Packet Tracer 

**Таблица адресации**
| Устройство | Интерфейс  | IP-Адрес |
| ------------- |:------------------:| ----------:|
| S1     | Vlan 1 | 192.168.1.1 | 255.255.255.0 |
| S2     | Vlan 2 |  192.168.1.2  | 255.255.255.0 | 
| S3     | Vlan 3 |   192.168.1.3  | 255.255.255.0 | |


### Часть 1. Настройка топологии и конфигурация основных параметро коммутаторов

#### Шаг 1. Создаём сеть согласно топологии.  
**a.**	Соединяем с помощью Витой Пары следующие узлы:
| Устройство/Порт | Устройство/Порт | 
| ------------- |:------------------:| 
| S1 / Fa0/1     | S2 / Fa0/1    |
| S1 / Fa0/2     | S2 / Fa0/2    | 
| S1 / Fa0/3     | S3 / Fa0/3    | 
| S1 / Fa0/4     | S3 / Fa0/4    | 
| S2 / Fa0/3     | S3 / Fa0/1    |    
| S2 / Fa0/4     | S3 / Fa0/2    | 

#### Шаг 2.Настроим базовые параметры маршрутизатора коммутаторов S1 и S2 и S3
**a.**  На коммутаторе S1 cносим настройки, назначаем пароли для привелигрованного режима, консоли, VTY, настроим интерфейс vlan 1, включим его и введём в транк,  пропишем logging synchronous , и сохраним конфигурацию в файл.

**b.**  На коммутаторе S2 cносим настройки, назначаем пароли для привелигрованного режима, консоли, VTY, настроим интерфейс vlan 1, включим его и введём в транк,  пропишем logging synchronous , и сохраним конфигурацию в файл.

**c.**  На коммутаторе S3 cносим настройки, назначаем пароли для привелигрованного режима, консоли, VTY, настроим интерфейс vlan 1, включим его и введём в транк,  пропишем logging synchronous , и сохраним конфигурацию в файл.

![Консоль1](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab7/Images/console1.png) 

**d.**  Проверяем доступность. Она есть.

![Консоль2](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab7/Images/console2.png)  

### Часть 2. Определение корневого моста

#### Шаг 1. Отключим порты F0/1 и F0/3 на всех коммутаторах	и отобразим данные протокола spanning-tree.

**a.**  Коммутатор S1: fa0/2 - altn; fa0/4 - root;

![Консоль3](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab7/Images/console3.png)  

**b.**  Коммутатор S2: fa0/2 - desg; fa0/4 - root; 

![Консоль4](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab7/Images/console4.png)  

**c.**  Коммутатор S3: fa0/2 - desg; fa0/4 - desg;

![Консоль5](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab7/Images/console5.png)  

2.1.1. Ответ на вопрос, - **_Какой коммутатор является корневым мостом?:_**  
_S3_ 

2.1.2. Ответ на вопрос, - **_Почему этот коммутатор был выбран протоколом spanning-tree в качестве корневого моста?:_**  
_Из-за Bridge ID и мак адресов_ 

2.1.3. Ответ на вопрос, - **_Какие порты на коммутаторе являются корневыми портами?:_**  
_fa0/4 на R1 и R2_ 

2.1.4. Ответ на вопрос, - **_Какой порт отображается в качестве альтернативного и в настоящее время заблокирован?:_**  
_fa0/2 S1_ 

2.1.5. Ответ на вопрос, - **_Почему протокол spanning-tree выбрал этот порт в качестве невыделенного (заблокированного) порта?:_**  
_ После обмена  BPDU, S2 и S1 понимают, что топология избыточна.  И S1, и S2 в своих BPDU сообщают об одном и том же Root Bridge. Это означает, что к Root Bridge существует два пути — через S1 и S2, а это и есть та самая избыточность против которой мы боремся. 
Необходимо заблокировать канал между S1 и S2 по следующей схеме:
У кого:
Меньший Root Path Cost.
Меньший Bridge ID.
Меньший Port ID.
того и блокируем._ 

### Часть 3. Наблюдение за процессом выбора протоколом STP порта, исходя из стоимости портов.

#### Шаг 1. Изменим стоимость корневого порта fa0/4 коммутатора S1, который имеет заблокированный порта fa0/2 и посмотрим за изменением состояния STP.

**a.**  STP cost не меняется, скорее всего баг;

![Консоль6](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab7/Images/console6.png)  

### Часть 4. Наблюдение за процессом выбора протоколом STP порта, исходя из приоритета портов.

#### Шаг 1. Включим все порты и проверим работу STP. 

**a.**  Коммутатор S1: 

![Консоль7](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab7/Images/console7.png)  

**b.**  Коммутатор S2: 

![Консоль7](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab7/Images/console7.png)  

**c.**  Коммутатор S3: корень

![Консоль7](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab7/Images/console7.png)  

4.1.1. Ответ на вопрос, - **_Какой порт выбран протоколом STP в качестве порта корневого моста на каждом коммутаторе некорневого моста?:_**  
_S2 FA0/2 и S1 FA0/3 _ 

4.1.2. Ответ на вопрос, - **_Почему протокол STP выбрал эти порты в качестве портов корневого моста на этих коммутаторах?:_**  
_Из-за Bridge ID и мак адресов_ 

### Ответим на вопросы 

1. Ответ на вопрос, - **_Какое значение протокол STP использует первым после выбора корневого моста, чтобы определить выбор порта?:_**  
_Bridge ID  Priority_ 

2. Ответ на вопрос, - **_Если первое значение на двух портах одинаково, какое следующее значение будет использовать протокол STP при выборе порта?:_**  
_Cost_ 

3. Ответ на вопрос, - **_Если оба значения на двух портах равны, каким будет следующее значение, которое использует протокол STP при выборе порта?:_**  
_Мак адрес _ 




