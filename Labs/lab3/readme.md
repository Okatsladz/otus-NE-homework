## Лабораторная работа #3. Расчет подсетей IPv4  
------


### Задача 1. 

| **Дано**|:| 
| ------------- |:------------------:| 
| PC-A / Fa0/1     | S1 / Fa0/6    | 
| S1 / Fa0/1      | S2 / Fa0/1  |   
| PC-B / Fa0/1     | S2 / Fa0/18   | 


| **Найти** | 
| ------------- |:------------------:| 
| PC-A / Fa0/1     | S1 / Fa0/6    | 
| S1 / Fa0/1      | S2 / Fa0/1  |   
| PC-B / Fa0/1     | S2 / Fa0/18   | 
#### Шаг 2.Настроим базовые параметры коммутаторов S1 и S2. 
**a.**  Настраиваем парольный доступ по VTY, console 0 и привелигированному доступу на коммутаторе S1:

![Консоль1](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab2/Images/console1.png)    

**b.**  Настраиваем парольный доступ по VTY, console 0 и привелигированному доступу на коммутаторе S2:

![Консоль2](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab2/Images/console2.png)    
 
**с.**  Настраиваем vlan 1 на обоих коммутаторах:

![Консоль3](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab2/Images/console3.png)    

  
### Часть 2. Изучение таблицы МАС-адресов коммутатора 

#### Шаг 1. Изучаем таблицу MAC-адресов

**a.** Выводим Мак-адреса устройств.

2.1.1	Откроем командную строку на PC-A и PC-B и введём команду **ipconfig /all**.

![Консоль4](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab2/Images/console4.png)  

_MAC-адрес компьютера PC-A: 0001.420C.2C1E_  
_MAC-адрес компьютера PC-B: 0050.0FAC.AA00_  

2.1.2	Подключимся к коммутаторам S1 и S2 через консоль и введём команду show **interface F0/1** на каждом коммутаторе. 

![Консоль5](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab2/Images/console5.png)  

_Физический адрес S1: Hardware is Lance, address is 0007.ecdc.8801 (bia 0007.ecdc.8801)_
_Физический адрес S2: Hardware is Lance, address is 0040.0b19.6401 (bia 0040.0b19.6401)_
 
**b.**  Посмотрим таблицу МАС-адресов коммутатора.

2.1.3	В привилегированном режиме введём команду **show mac address-table** и нажмиём клавишу ввода.

![Консоль6](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab2/Images/console6.png)  

_В таблице мак-адресов l2-адреса появляются при прохождении кадра в сторону определённого порта, в тч при широковещательном запросе._

![Консоль7](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab2/Images/console7.png)  

2.1.4. Ответ на вопрос, - **_Записаны ли в таблице МАС-адресов какие-либо МАС-адреса?:_**  
_Был записан Мак-Адрес интерфейса, находящийся внутри Vlan1, после прохожденмия коммутатора S2 был записан второй Мак-адрес_  

2.1.5. Ответ на вопрос, - **_Какие МАС-адреса записаны в таблице? С какими портами коммутатора они сопоставлены и каким устройствам принадлежат?:_**  
_Записаны мак адреса 0007.ecdc.8801, принадлежащий интерфейсу F0/1 на коммутаторе S1, сопоставленный с интерфейсом F0/1 коммутатора S2 и MAC-адрес компьютера PC-B: 0050.0FAC.AA00, принадлижайщий интерфейсу F0/0 сетевой платы компьютера PC-B, сопоставленный с интерфейсом F0/18 коммутатора S2_

2.1.6. Ответ на вопрос, - **_Если не записаны МАС-адреса сетевых устройств в шаге 1 часть 2, как можно определить, каким устройствам принадлежат МАС-адреса, используя только выходные данные команды show mac address-table? Работает ли это решение в любой ситуации?:_**  
_Если мы знаем схему сети, то можно определить по номеру интерфейса данного устройства к какому устройству и к какому именно порту имеет подключение интерфейс данного устройства, соотвественно не зная схему сети определить данную информацию не представляется возможным._  

#### Шаг 2. Очищаем таблицу MAC-адресов

**a.** Проводим манипуляции с таблицей мак-адресов. 
2.2.1. В привилегированном режиме  на коммутаторе S2 введём команду **clear mac address-table dynamic** и быстро вводим команду  **show mac address-table**.

![Консоль8](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab2/Images/console8.png)  

2.2.2. Ответ на вопрос, - **_Указаны ли в таблице МАС-адресов адреса для VLAN 1? Указаны ли другие МАС-адреса?:_**  
_Нет, не указаны_

2.2.3. Ответ на вопрос, - **_Появились ли в таблице МАС-адресов новые адреса после ввода команды show?:_**  
_Появился мак адрес порта коммутатор S1, появившися в результате широковещательного запроса внутри Vlan_ 

#### Шаг 3. Проводим манипуляции с эхо-запросами и проверяем таблицы мак-адресом на коммутаторах

**a.** На компьютере PC-B откроем командную строку и введём команду arp -a.

![Консоль9](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab2/Images/console9.png)  

2.3.1. Ответ на вопрос, - **_Не считая адресов многоадресной и широковещательной рассылки, сколько пар IP- и МАС-адресов устройств было получено через протокол ARP?:_**  
_1, S1_ 

**b.** Из командной строки PC-B отправим эхо-запросы на компьютер PC-A, а также коммутаторы S1 и S2.

![Консоль10](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab2/Images/console10.png)  

2.3.2. Ответ на вопрос, - **_От всех ли устройств получены ответы?:_**  
_Да, от всех._ 

**с.** Подключившись через консоль к коммутатору S2, введём команду show mac address-table.

![Консоль11](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab2/Images/console11.png)  

2.3.3. Ответ на вопрос, - **_Добавил ли коммутатор в таблицу МАС-адресов дополнительные МАС-адреса? Если да, то какие адреса и устройства?:_**  
_Только по S1._

2.3.4. **На компьютере PC-B откроем командную строку и еще раз введите команду arp -a**. 

![Консоль12](https://github.com/Okatsladz/otus-NE-homework/blob/main/Labs/lab2/Images/console12.png)  

2.3.5. Ответ на вопрос, - **_Появились ли в ARP-кэше компьютера PC-B дополнительные записи для всех сетевых устройств, которым были отправлены эхо-запросы?:_**  
_Да, по всем устройствам_ 

#### Ответы на общие вопросы:

1. Ответ на вопрос, - **_В сетях Ethernet данные передаются на устройства по соответствующим МАС-адресам. Для этого коммутаторы и компьютеры динамически создают ARP-кэш и таблицы МАС-адресов. Если компьютеров в сети немного, эта процедура выглядит достаточно простой. Какие сложности могут возникнуть в крупных сетях?:_**  
_Никаких, так как арп-запрос имеет небольшой размер тела и соотвественно вряд-ли сможет повесить сеть_  



